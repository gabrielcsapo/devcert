"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const yargs_1 = require("yargs");
const constants_1 = require("./constants");
const express = require("express");
const fs = require("fs");
const app = express();
const port = yargs_1.argv.port;
app.get('/getRemoteCertificate', (req, res) => {
    if (fs.existsSync(constants_1.rootCACertPath)) {
        res.send(fs.readFileSync(constants_1.rootCACertPath, 'utf8'));
    }
});
const server = app.listen(port, () => console.log(`Server started at port: ${port}`));
app.get('/closeRemoteServer', (req, res) => {
    res.send('Server closing');
    server.close(() => {
        console.log('Process terminated');
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVtb3RlLmpzIiwic291cmNlUm9vdCI6Ii4vIiwic291cmNlcyI6WyJyZW1vdGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxpQ0FBNkI7QUFDN0IsMkNBQTZDO0FBQzdDLG1DQUFvQztBQUNwQyx5QkFBeUI7QUFFekIsTUFBTSxHQUFHLEdBQUcsT0FBTyxFQUFFLENBQUM7QUFDdEIsTUFBTSxJQUFJLEdBQUcsWUFBSSxDQUFDLElBQUksQ0FBQztBQUV2QixHQUFHLENBQUMsR0FBRyxDQUFDLHVCQUF1QixFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFO0lBQzVDLElBQUksRUFBRSxDQUFDLFVBQVUsQ0FBQywwQkFBYyxDQUFDLEVBQUU7UUFDakMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsWUFBWSxDQUFDLDBCQUFjLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztLQUNuRDtBQUNILENBQUMsQ0FBQyxDQUFDO0FBRUgsTUFBTSxNQUFNLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQ25DLE9BQU8sQ0FBQyxHQUFHLENBQUMsMkJBQTJCLElBQUksRUFBRSxDQUFDLENBQy9DLENBQUM7QUFFRixHQUFHLENBQUMsR0FBRyxDQUFDLG9CQUFvQixFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFO0lBQ3pDLEdBQUcsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUMzQixNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRTtRQUNoQixPQUFPLENBQUMsR0FBRyxDQUFDLG9CQUFvQixDQUFDLENBQUM7SUFDcEMsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFyZ3YgfSBmcm9tICd5YXJncyc7XG5pbXBvcnQgeyByb290Q0FDZXJ0UGF0aCB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnO1xuXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5jb25zdCBwb3J0ID0gYXJndi5wb3J0O1xuXG5hcHAuZ2V0KCcvZ2V0UmVtb3RlQ2VydGlmaWNhdGUnLCAocmVxLCByZXMpID0+IHtcbiAgaWYgKGZzLmV4aXN0c1N5bmMocm9vdENBQ2VydFBhdGgpKSB7XG4gICAgcmVzLnNlbmQoZnMucmVhZEZpbGVTeW5jKHJvb3RDQUNlcnRQYXRoLCAndXRmOCcpKTtcbiAgfVxufSk7XG5cbmNvbnN0IHNlcnZlciA9IGFwcC5saXN0ZW4ocG9ydCwgKCkgPT5cbiAgY29uc29sZS5sb2coYFNlcnZlciBzdGFydGVkIGF0IHBvcnQ6ICR7cG9ydH1gKVxuKTtcblxuYXBwLmdldCgnL2Nsb3NlUmVtb3RlU2VydmVyJywgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5zZW5kKCdTZXJ2ZXIgY2xvc2luZycpO1xuICBzZXJ2ZXIuY2xvc2UoKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdQcm9jZXNzIHRlcm1pbmF0ZWQnKTtcbiAgfSk7XG59KTtcbiJdfQ==